import matplotlib.pyplot as plt

rates = [
    3479.1, 6698.8, 13755.0, 28916.6, 35182.1, 34748.4, 35210.5, 34742.7,
    34834.4, 33835.9, 35140.5, 33506.7, 35118.5, 34757.4, 35608.8, 23146.4,
    34122.1, 35603.4, 35179.7, 34441.7, 34682.1, 35539.5, 34831.8, 34319.8,
    35904.1, 35355.1, 35122.7, 34977.4, 35409.3, 35224.4, 33635.4, 35488.4,
    35245.8, 34814.6, 24276.2, 34703.5, 34765.7, 35158.2, 34481.1, 34482.6,
    34429.6, 35210.2, 35467.8, 34826.7, 33739.9, 35198.2, 33501.6, 33935.0,
    35261.2, 35361.8, 33071.1, 35112.0, 35541.9, 23380.9,
]

p50 = [
    88.8, 24.8, 22.5, 23.5, 23.1, 23.0, 23.0, 23.0,
    23.0, 23.2, 23.0, 23.8, 23.0, 23.0, 22.8, 23.0,
    23.8, 22.9, 22.9, 23.1, 23.1, 22.9, 23.0, 23.1,
    23.0, 23.0, 23.0, 23.5, 23.0, 23.0, 23.7, 22.8,
    23.0, 23.1, 21.0, 23.4, 23.1, 23.2, 23.3, 23.3,
    23.4, 23.2, 23.0, 23.2, 23.8, 23.3, 23.5, 23.7,
    23.4, 23.1, 23.5, 23.4, 23.2, 22.4,
]

p99 = [
    117.0, 84.6, 39.4, 45.7, 36.2, 47.0, 50.5, 56.8,
    52.4, 65.0, 47.2, 65.6, 40.4, 57.0, 51.3, 78.7,
    37.1, 43.8, 53.8, 46.9, 53.7, 53.8, 55.6, 63.7,
    39.0, 50.5, 60.8, 39.0, 49.9, 51.0, 54.0, 55.8,
    49.2, 50.8, 74.4, 34.8, 55.3, 52.3, 57.3, 51.9,
    58.1, 59.7, 51.3, 62.8, 58.1, 40.1, 60.6, 61.7,
    38.6, 48.5, 68.7, 38.6, 47.9, 99.2,
]

maxv = [
    227.2, 157.3, 180.6, 168.0, 211.0, 217.4, 180.0, 265.8,
    198.9, 185.2, 114.0, 169.0, 89.2, 622.8, 135.0, 29647.1,
    173.2, 252.0, 188.2, 133.2, 155.6, 136.6, 219.5, 197.3,
    134.6, 189.5, 211.6, 157.4, 191.5, 145.5, 214.7, 157.2,
    317.0, 194.0, 24740.9, 114.8, 546.9, 135.1, 212.7, 293.5,
    329.1, 193.1, 169.6, 508.0, 246.4, 150.1, 239.6, 150.3,
    126.5, 144.6, 572.8, 100.2, 157.5, 24861.6,
]

plt.figure(figsize=(8, 5))
plt.plot(rates, p50,  marker="o", label="p50")
plt.plot(rates, p99,  marker="o", label="p99")
plt.plot(rates, maxv, marker="o", label="max")

plt.xscale("log")
plt.yscale("log")   # <- add this
plt.xlabel("Effective throughput (msg/s, log scale)")
plt.ylabel("RTT (Âµs, log scale)")
plt.title("Latency vs throughput (high-rate sweep)")
plt.grid(True, which="both", linestyle="--", alpha=0.4)
plt.legend()
plt.tight_layout()
plt.show()